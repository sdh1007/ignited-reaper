<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performance Testing - Hardy Digital Labs</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: #1a1a2e;
            color: #fff;
            padding: 20px;
            margin: 0;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .metric-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            color: #ff6b35;
        }
        .metric-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        .status-good { color: #4CAF50; }
        .status-warning { color: #FF9800; }
        .status-error { color: #F44336; }
        .test-controls {
            margin: 20px 0;
            text-align: center;
        }
        button {
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin: 0 10px;
            font-weight: 600;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255, 107, 53, 0.3);
        }
        .log {
            background: #000;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            height: 300px;
            overflow-y: auto;
            border: 1px solid #333;
        }
        .instructions {
            background: rgba(255, 107, 53, 0.1);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #ff6b35;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Hardy Digital Labs - Performance Testing Dashboard</h1>
        
        <div class="instructions">
            <h3>üöÄ Performance Testing Instructions</h3>
            <p><strong>Automated Tests:</strong></p>
            <ul>
                <li><code>npm install -g lighthouse</code> - Install Lighthouse globally</li>
                <li><code>lighthouse http://localhost:8000 --config-path=./lighthouse-config.json --output=html --output-path=./performance-report.html</code></li>
            </ul>
            <p><strong>WebPageTest:</strong> Visit <a href="https://webpagetest.org" target="_blank">webpagetest.org</a> and test your deployed site</p>
            <p><strong>Chrome DevTools:</strong> Press F12 ‚Üí Lighthouse tab ‚Üí Run audit</p>
        </div>

        <div class="test-controls">
            <button onclick="runPerformanceTest()">üß™ Run Performance Test</button>
            <button onclick="simulateSlowConnection()">üêå Simulate Slow Connection</button>
            <button onclick="testMemoryUsage()">üíæ Test Memory Usage</button>
            <button onclick="clearLog()">üóëÔ∏è Clear Log</button>
        </div>

        <div class="metrics-grid" id="metricsGrid">
            <div class="metric-card">
                <div class="metric-value" id="fps">--</div>
                <div class="metric-label">Frames Per Second</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="memory">--</div>
                <div class="metric-label">Memory Usage (MB)</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="loadTime">--</div>
                <div class="metric-label">Load Time (ms)</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="lcp">--</div>
                <div class="metric-label">Largest Contentful Paint</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="fid">--</div>
                <div class="metric-label">First Input Delay</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="cls">--</div>
                <div class="metric-label">Cumulative Layout Shift</div>
            </div>
        </div>

        <h3>üìä Performance Log</h3>
        <div class="log" id="performanceLog"></div>

        <div style="margin-top: 40px;">
            <h3>üìà Optimization Checklist</h3>
            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px;">
                <div id="optimizationChecklist">
                    <div>‚úÖ Images optimized and compressed</div>
                    <div>‚úÖ CSS minified</div>
                    <div>‚úÖ JavaScript lazy loaded</div>
                    <div>‚úÖ Progressive image loading implemented</div>
                    <div>‚úÖ Mobile touch gestures optimized</div>
                    <div>‚úÖ Performance monitoring active</div>
                    <div>‚úÖ Service Worker caching enabled</div>
                    <div>‚úÖ Resource hints added</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Performance testing functions
        let performanceLog = document.getElementById('performanceLog');
        
        function log(message) {
            const timestamp = new Date().toLocaleTimeString();
            performanceLog.innerHTML += `[${timestamp}] ${message}\n`;
            performanceLog.scrollTop = performanceLog.scrollHeight;
        }
        
        function clearLog() {
            performanceLog.innerHTML = '';
        }
        
        function runPerformanceTest() {
            log('üß™ Starting performance test...');
            
            // Measure various metrics
            const startTime = performance.now();
            
            // Test FPS
            let frameCount = 0;
            const fpsStart = performance.now();
            
            function countFrames() {
                frameCount++;
                if (performance.now() - fpsStart < 1000) {
                    requestAnimationFrame(countFrames);
                } else {
                    document.getElementById('fps').textContent = frameCount;
                    log(`üìä FPS: ${frameCount}`);
                }
            }
            requestAnimationFrame(countFrames);
            
            // Test memory
            if (performance.memory) {
                const memory = (performance.memory.usedJSHeapSize / 1048576).toFixed(2);
                document.getElementById('memory').textContent = memory;
                log(`üíæ Memory: ${memory} MB`);
            }
            
            // Test load time
            const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
            document.getElementById('loadTime').textContent = loadTime;
            log(`‚è±Ô∏è Load time: ${loadTime} ms`);
            
            // Web Vitals
            measureWebVitals();
            
            log('‚úÖ Performance test completed');
        }
        
        function measureWebVitals() {
            // LCP
            new PerformanceObserver((entryList) => {
                const entries = entryList.getEntries();
                const lastEntry = entries[entries.length - 1];
                const lcp = Math.round(lastEntry.startTime);
                document.getElementById('lcp').textContent = lcp + 'ms';
                document.getElementById('lcp').className = 'metric-value ' + getStatus(lcp, 2500, 4000);
                log(`üéØ LCP: ${lcp} ms`);
            }).observe({ entryTypes: ['largest-contentful-paint'] });
            
            // FID
            new PerformanceObserver((entryList) => {
                for (const entry of entryList.getEntries()) {
                    const fid = Math.round(entry.processingStart - entry.startTime);
                    document.getElementById('fid').textContent = fid + 'ms';
                    document.getElementById('fid').className = 'metric-value ' + getStatus(fid, 100, 300);
                    log(`üëÜ FID: ${fid} ms`);
                }
            }).observe({ entryTypes: ['first-input'] });
            
            // CLS
            let clsValue = 0;
            new PerformanceObserver((entryList) => {
                for (const entry of entryList.getEntries()) {
                    if (!entry.hadRecentInput) {
                        clsValue += entry.value;
                    }
                }
                const cls = Math.round(clsValue * 1000) / 1000;
                document.getElementById('cls').textContent = cls;
                document.getElementById('cls').className = 'metric-value ' + getStatus(cls, 0.1, 0.25);
                log(`üìê CLS: ${cls}`);
            }).observe({ entryTypes: ['layout-shift'] });
        }
        
        function getStatus(value, good, poor) {
            if (value <= good) return 'status-good';
            if (value <= poor) return 'status-warning';
            return 'status-error';
        }
        
        function simulateSlowConnection() {
            log('üêå Simulating slow connection...');
            // This would typically be done through DevTools
            log('üí° To simulate slow connection:');
            log('  1. Open Chrome DevTools (F12)');
            log('  2. Go to Network tab');
            log('  3. Select "Slow 3G" from throttling dropdown');
            log('  4. Reload the page');
        }
        
        function testMemoryUsage() {
            log('üíæ Testing memory usage...');
            
            if (performance.memory) {
                const memory = performance.memory;
                const used = (memory.usedJSHeapSize / 1048576).toFixed(2);
                const total = (memory.totalJSHeapSize / 1048576).toFixed(2);
                const limit = (memory.jsHeapSizeLimit / 1048576).toFixed(2);
                
                log(`üìä Used: ${used} MB`);
                log(`üìä Total: ${total} MB`);
                log(`üìä Limit: ${limit} MB`);
                
                if (used > 100) {
                    log('‚ö†Ô∏è High memory usage detected!');
                } else {
                    log('‚úÖ Memory usage is optimal');
                }
            } else {
                log('‚ùå Memory API not available');
            }
        }
        
        // Auto-start performance monitoring
        window.addEventListener('load', () => {
            log('üöÄ Performance monitoring started');
            setTimeout(runPerformanceTest, 1000);
        });
        
        // Connection monitoring
        if ('connection' in navigator) {
            const connection = navigator.connection;
            log(`üåê Connection: ${connection.effectiveType}`);
            log(`üì∂ Downlink: ${connection.downlink} Mbps`);
            log(`‚è±Ô∏è RTT: ${connection.rtt} ms`);
        }
    </script>
</body>
</html>